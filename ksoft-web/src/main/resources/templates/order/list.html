<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
	  xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity4">
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
	<meta name="renderer" content="webkit" />
	<meta charset="UTF-8">
	<title>高速救援-工单管理</title>
	<link href="http://apps.bdimg.com/libs/bootstrap/3.3.4/css/bootstrap.min.css" rel="stylesheet">
	<link th:href="@{/css/bootstrap-table/bootstrap-table.min.css}" href="http://apps.bdimg.com/libs/bootstrap/3.3.4/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" th:href="@{/css/common.css}" type="text/css" href="../static/css/common.css">
	<link rel="stylesheet" th:href="@{/css/gdgl.css}" type="text/css" href="../static/css/gdgl.css">
</head>
<body>
	<div class="box" >
		<div th:replace="include/template :: leftNavi"></div>
		<div class="right">

		<div th:replace="include/template :: topBar"></div>
			<div class="contentBox">
				<div class="content">
					<div class="content_1">
						<p class="contentTit">
							<b>工单管理 </b>
							<div th:text="${staticVariable}"></div>
						</p>
						<div class="contentInfo">
							<ul class="contentInfoList">
								<li>
									<span>地区</span>
									<select name="region" >
										<option value="">所有</option>
										<option th:each="p:${provinces}"
												th:value="${p.id}" th:text="${p.name}"></option>
									</select>
								</li>

								<li>
									<span>状态</span>
									<select name="orderStatus">
										<option value="ALL"> 所有</option>
										<option value="NOT_SERVICE"> 待服务</option>
										<option value="NOT_AUDIT"> 待审核</option>
										<option value="DENY"> 已拒绝</option>
										<option value="CANCELED"> 已取消</option>
										<option value="COMPLETE"> 已完成</option>
									</select>
								</li>

								<li>
									<span>故障车司机电话</span>
									<input name="driverPhone" type="text">
								</li>
							</ul>

		`					<div class="contentInfoBut">
								<a href="" class="green_1"><b></b>添加</a>
								<a href="" class="white_1"><b></b>导出</a>
								<a  class="blue_1 btn-search"><b></b>搜索</a>
							</div>
						</div>
						<div>

						<table id="order-list1"    >
						</table>
						</div>



						<!--<table id="order-list"   class="table table-bordered table-striped table-hover">-->
							<!--<thead>-->
							<!--<tr align="center">-->
								<!--<td>编号</td>-->
								<!--<td>工单编号</td>-->
								<!--<td>工单时间</td>-->
								<!--<td>故障维修区域</td>-->
								<!--<td>事故车车牌号</td>-->
								<!--<td>事故车司机</td>-->
								<!--<td>事故车司机电话</td>-->
								<!--<td>名称/车牌</td>-->
								<!--<td>服务区（车）联系人</td>-->
								<!--<td>相关客服</td>-->
								<!--<td>订单来源</td>-->
								<!--<td>工单状态</td>-->
								<!--<td>操作</td>-->
							<!--</tr>-->
							<!--</thead>-->
							<!--<tbody>-->
							<!--<tr th:each="order:${orders.content}">-->
								<!--<td th:text="${orderStat.count}">编号</td>-->
								<!--<td th:text="${order.sn}">工单编号</td>-->
								<!--<td th:text="${#dates.format(order.createTime,'yyyy-MM-dd HH:mm:ss')}">工单时间</td>-->
								<!--<td th:text="${order.serviceRegion}">故障维修区域</td>-->
								<!--<td th:text="${order.plateNum}">事故车车牌号</td>-->
								<!--<td th:text="${order.driverName}">事故车司机</td>-->
								<!--<td th:text="${order.driverPhone}">事故车司机电话</td>-->
								<!--<td th:text="${order.plateNum}">名称/车牌</td>-->
								<!--<td>服务区（车）联系人</td>-->
								<!--<td>相关客服</td>-->
								<!--<td>订单来源</td>-->
								<!--<td  ><div class="label  label-success" th:text="${order.orderStatus.description}"></div></td>-->
								<!--<td>操作</td>-->
							<!--</tr>-->
							<!--</tbody>-->
						<!--</table>-->

						<!--<div class="contentTableBox">-->
							<!--<ul class="contentTable">-->
								<!--<li class="contentTableLi">-->
									<!--<span class="w47">序号</span>-->
									<!--<span class="w161">工单编号</span>-->
									<!--<span class="w147">工单时间</span>-->
									<!--<span class="w129">故障维修区域</span>-->
									<!--<span class="w136">事故车车牌号</span>-->
									<!--<span class="w115">事故车司机</span>-->
									<!--<span class="w150">事故车司机电话</span>-->
									<!--<span class="w114">名称/车牌</span>-->
									<!--<span class="w147">服务区（车）联系人</span>-->
									<!--<span class="w77">客服</span>-->
									<!--<span class="w83">订单来源</span>-->
									<!--<span class="w91">工单状态</span>-->
									<!--<span class="w84">操作</span>-->
								<!--</li>-->


								<!--<li th:each="order:${orders.content}" class="contentTableLi">-->
									<!--<span class="w47" th:text="${orderStat.count}">编号</span>-->
									<!--<span th:text="${order.sn}">工单编号</span>-->
									<!--<span th:text="${#dates.format(order.createTime,'yyyy-MM-dd HH:mm:ss')}">工单时间</span>-->
									<!--<span th:text="${order.serviceRegion}">故障维修区域</span>-->
									<!--<span th:text="${order.plateNum}">事故车车牌号</span>-->
									<!--<span th:text="${order.driverName}">事故车司机</span>-->
									<!--<span th:text="${order.driverPhone}">事故车司机电话</span>-->
									<!--<span th:text="${order.plateNum}">名称/车牌</span>-->
									<!--<span>服务区（车）联系人</span>-->
									<!--<span>相关客服</span>-->
									<!--<span>订单来源</span>-->
									<!--<span  ><div class="label  label-success" th:text="${order.orderStatus.description}"></div></span>-->
									<!--<span>操作</span>-->
								<!--</li>-->
								<!--<li class="contentTableLi">-->
									<!--<span class="w47">6</span>-->
									<!--<span class="w161">20161015878878</span>-->
									<!--<span class="w147">2016-10-20 9:30</span>-->
									<!--<span class="w129">乌鲁木齐</span>-->
									<!--<span class="w136">乌A154879</span>-->
									<!--<span class="w115">李小璐</span>-->
									<!--<span class="w150">13898794562</span>-->
									<!--<span class="w114">乌A154879</span>-->
									<!--<span class="w147">王李波</span>-->
									<!--<span class="w77">李晓红</span>-->
									<!--<span class="w83">中策</span>-->
									<!--<span class="w91 fontColorBule_2">已完成</span>-->
									<!--<span class="w84 fontColorBule_1">取消</span>-->
								<!--</li>-->

							<!--</ul>-->
						<!--</div>-->

						<!--<div class="page">-->
							<!--<a   class="pre but_1">首页</a>-->
							<!--<a   class="pre but_1">上一页</a>-->

							<!--<a th:each="i:${#numbers.sequence(first,end)}" th:class="${orders.page==i?'num but_2':'num but_1'}" class="num but_1" th:text="${i}"></a>-->
							<!--&lt;!&ndash;<span>···</span>&ndash;&gt;-->
							<!--<a   class="pre but_1">下一页</a>-->
							<!--<a   class="pre but_1">末页</a>-->

							<!--<span th:text="${'共 '+orders.totalPage+' 页'}">共120页</span>-->
							<!--<span>到第</span>-->
							<!--<input type="text" th:placeholder="${orders.totalPage}" placeholder="120">-->
							<!--<span>页</span>-->
							<!--<a href="" class="pre but_2">确定</a>-->
						<!--</div>-->
					</div>
				</div>
			</div>
		</div>
	</div>
</body>
<script type="text/javascript" th:src="@{/js/libs/jquery.min.js}" src="../static/js/libs/jquery.min.js"></script>
<script th:src="@{/js/libs/bootstrap.min.js}" type="text/javascript"></script>
<script th:src="@{/js/libs/bootstrap-table/bootstrap-table.min.js}" type="text/javascript"></script>
<script th:src="@{/js/libs/bootstrap-table/bootstrap-table-zh-CN.min.js}" type="text/javascript"></script>
<script type="text/javascript">
		function imgCenter()
		{
			var imgMargin=($('#menuDiv_1_img').parent().width()-47)/2;
			$('#menuDiv_1_img').css('margin-left',imgMargin);
		}
	$(function(){
		imgCenter();
		$(".btn-search").on("click",function () {
			var str = getData();
			window.location.href = "/orders?"+str;
        });
		$(window).on('resize scroll',function(){
			imgCenter();
		});

		$('.menuDiv').click(function(){
			$(this).children('b').addClass('menuLine');
			$(this).siblings().children('b').removeClass('menuLine')
		});

		$('.contentInfoList li:first-child').find('span').css('margin-left','0');
		$('.contentInfoBut a:first-child').css('margin-right','0');
		$('.contentTable li:first-child').css('color','#6dadff');
		$('.contentTit b:last').css('border-bottom','2px #3e91fc solid');


		$("table#order-list1").bootstrapTable({
			url:"/orders/search",
			method:'post',
            contentType:"application/x-www-form-urlencoded",
            sidePagination:"server",
            pageSize:10,
            pageList:[5,10],
            pagination:true,
            striped:true,
            paginationPreText:"上一页",
            paginationNextText:"下一页",
			columns:[
				{
                    title:"序号",
					formatter:function (value,row,index) {
						return index+1;
                    }
				}, {
                    field:"sn",
					title:"订单号",
					width:170,
				},{
					field:"createTime",
					title:"创建时间",
					width:180,
				},{
					field:"serviceRegion",
					title:"故障区域"
				},{
                    field:"plateNum",
                    title:"事故车车牌号"
                },{
                    field:"driverName",
                    title:"事故车司机"
                },{
                    field:"driverPhone",
                    title:"事故车司机电话"
                },{
                    field:"",
                    title:"名称/车牌"
                },{
                    field:"",
                    title:"服务区（车）联系人"
                },{
                    field:"",
                    title:"客服"
                },{
                    field:"orderSource",
                    title:"订单来源",
                    formatter:function(v,r,i){
                        if(v=="YUEYUN"){
                            return '<span >粤运</span>';
                        }
                        if(v=="ZHONGCE"){
                            return '<span >中策</span>';
                        }

                    }
                },{
                    field:"orderStatus",
                    title:"工单状态",
					formatter:function(v,r,i){
                        if(v=="NOT_SERVICE"){
                            return '<span class=" fontColorGreen">待服务</span>';
						}
						if(v=="NOT_AUDIT"){
                            return '<span class=" fontColorPink">待审核</span>';
						}
						if(v=="COMPLETE"){
						    return '<span class=" fontColorBule_2">已完成</span>';
						}

					}
                },{
                    field:"",
                    title:"操作",
					formatter:function (v,r,i) {
						if(r.orderStatus=='NOT_SERVICE'){
                            return '<span class="fontColorBule_1">取消</span>';
						}
                    }
                }
			]
		});


	});
	
	function getData() {
		var regionId = $("select[name='region']").val();
		var orderStatus = $("select[name='orderStatus']").val();
		var driverPhone = $("input[name='driverPhone']").val();
		console.log(regionId);
		console.log(orderStatus);
		console.log(driverPhone);
		var str = "orderStatus="+orderStatus +"&driverPhone="+driverPhone+"&regionId="+regionId
		return str;
    }
</script>
</html>